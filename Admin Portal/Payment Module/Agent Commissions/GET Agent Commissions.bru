meta {
  name: GET Agent Commissions
  type: http
  seq: 1
}

get {
  url: {{baseUrl}}/payments/agent-commissions?page=1&limit=10&status=PENDING
  body: none
  auth: none
}

query {
  page: 1
  limit: 10
  status: PENDING
  ~agentId: {{agentId}}
  ~applicationId: {{applicationId}}
  ~dateFrom: 2025-01-01
  ~dateTo: 2025-12-31
}

headers {
  user-id: {{userId}}
  portal-category-id: {{portalCategoryId}}
  role-id: {{roleId}}
}

docs {
  # Get Agent Commissions
  
  Retrieves agent commission records with filtering and pagination in the same format as applicant payments.
  
  ## Query Parameters
  - `page` (optional): Page number for pagination (default: 1)
  - `limit` (optional): Number of items per page (default: 10)
  - `status` (optional): Filter by commission status (PENDING, APPROVED, REJECTED, PAID)
  - `agentId` (optional): Filter by specific agent ID
  - `applicationId` (optional): Filter by specific application ID
  - `dateFrom` (optional): Filter commissions created from date (YYYY-MM-DD)
  - `dateTo` (optional): Filter commissions created to date (YYYY-MM-DD)
  
  ## Response Format
  ```json
  {
    "status": "success",
    "statusCode": 200,
    "message": "Agent commissions retrieved successfully",
    "data": {
      "data": [
        {
          "id": 1,
          "applicantId": "APP-001",
          "firstName": "John",
          "course": "Computer Science BSc",
          "paymentPlan": "Commission",
          "paymentStatus": "Pending",
          "dueDate": "2025-09-05",
          "lastReminder": "",
          "totalFee": 1200,
          "paidAmount": 0,
          "installmentsPaid": 0,
          "nextPayment": {
            "date": "2025-09-05",
            "amount": 1200
          },
          "paymentHistory": [
            {
              "date": "2025-07-20",
              "amount": 1200,
              "method": "Bank Transfer",
              "status": "Pending"
            },
            {
              "date": "2025-07-18",
              "amount": 600,
              "method": "Card",
              "status": "Approved"
            }
          ]
        }
      ]
    },
    "pagination": {
      "totalPages": 1,
      "totalItems": 8,
      "currentPage": 1,
      "itemsPerPage": 10,
      "pageSize": 10,
      "from": 1,
      "to": 8
    }
  }
  ```
  
  ## Commission Status Flow
  1. **PENDING**: Commission created, awaiting approval
  2. **APPROVED**: Commission approved for payment
  3. **PAID**: Commission payment completed
  4. **REJECTED**: Commission rejected (e.g., application cancelled)
  
  ## Commission Calculation
  - Commission amount = (Base amount Ã— Commission rate) / 100
  - Base amount typically comes from student's course fee
  - Commission rate is percentage set per agent or application
  
  ## Payment History
  Tracks all commission payment attempts and their status:
  - **Pending**: Payment initiated but not confirmed
  - **Approved**: Payment successfully processed
  - **Rejected**: Payment failed or rejected
}