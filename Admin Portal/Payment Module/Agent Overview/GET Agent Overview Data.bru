meta {
  name: GET Agent Overview Data
  type: http
  seq: 2
}

get {
  url: {{baseUrl}}/payments/agent-overview/data?page=1&limit=10&status=PENDING
  body: none
  auth: none
}

query {
  page: 1
  limit: 10
  status: PENDING
  ~agentId: {{agentId}}
  ~dateFrom: 2025-01-01
  ~dateTo: 2025-12-31
}

headers {
  user-id: {{userId}}
  portal-category-id: {{portalCategoryId}}
  role-id: {{roleId}}
}

docs {
  # Get Agent Overview Data
  
  Retrieves detailed agent commission data in the same format as applicant payments for consistency in UI components.
  
  ## Query Parameters
  - `page` (optional): Page number for pagination (default: 1)
  - `limit` (optional): Number of items per page (default: 10)
  - `status` (optional): Filter by commission status (PENDING, APPROVED, REJECTED, PAID)
  - `agentId` (optional): Filter by specific agent ID
  - `dateFrom` (optional): Filter by start date (YYYY-MM-DD)
  - `dateTo` (optional): Filter by end date (YYYY-MM-DD)
  
  ## Response Format
  ```json
  {
    "status": "success",
    "statusCode": 200,
    "message": "Agent commissions retrieved successfully",
    "data": {
      "data": [
        {
          "id": 1,
          "applicantId": "APP-001",
          "firstName": "John",
          "course": "Computer Science BSc",
          "paymentPlan": "Commission",
          "paymentStatus": "Pending",
          "dueDate": "2025-09-05",
          "lastReminder": "2025-08-15",
          "totalFee": 1200,
          "paidAmount": 0,
          "installmentsPaid": 0,
          "nextPayment": {
            "date": "2025-09-05",
            "amount": 1200
          },
          "paymentHistory": [
            {
              "date": "2025-07-20",
              "amount": 1200,
              "method": "Bank Transfer",
              "status": "Pending"
            }
          ]
        }
      ]
    },
    "pagination": {
      "totalPages": 1,
      "totalItems": 8,
      "currentPage": 1,
      "itemsPerPage": 10,
      "pageSize": 10,
      "from": 1,
      "to": 8
    }
  }
  ```
  
  ## Data Fields Mapping
  
  ### Commission-Specific Fields
  - `paymentPlan`: Always "Commission" for agent records
  - `totalFee`: Commission amount calculated from base amount and rate
  - `paidAmount`: Amount already paid to agent
  - `paymentStatus`: Commission status (Pending/Approved/Paid/Rejected)
  - `nextPayment`: Next commission payment due (if approved but not paid)
  
  ### Shared UI Components
  This endpoint returns data in the same format as applicant payments, allowing the frontend to reuse the same table components and filtering logic for both applicant payments and agent commissions.
}